
<!-- saved from url=(0058)http://www.cs.usfca.edu/~wolber/SoftwareDev/C/CStructs.htm -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Language" content="en-us">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">

<title>Structs in C</title>
<style>
<!--
div.Section1
	{page:Section1;}
 p.MsoNormal
	{mso-style-parent:"";
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman";
	margin-left:0in; margin-right:0in; margin-top:0in}
span.SpellE
	{}
span.GramE
	{}
-->
</style>
<style type="text/css"></style></head>

<body linksnaploaded="c0.1.4"><div id="StayFocusd-infobar" style="display: none; top: 784px;"><img src="chrome-extension://laankejkbhbdhmipfmgcngdelahlfoji/img/eye_19x19_red.png"><span id="StayFocusd-infobar-msg"></span><span id="StayFocusd-infobar-links"><a href="http://www.cs.usfca.edu/~wolber/SoftwareDev/C/CStructs.htm#" id="StayFocusd-infobar-never-show">hide forever</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a href="http://www.cs.usfca.edu/~wolber/SoftwareDev/C/CStructs.htm#" id="StayFocusd-infobar-hide">hide once</a></span></div>

<div class="Section1">
  <p class="MsoNormal" style="text-align: center" align="center">
  <span class="SpellE"><b>Structs</b></span><b> in C</b></p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">Like Java classes but without methods or public/private 
  specifications.</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">Used to package related data together.</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal"><b>Example of defining a struct:</b></p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="SpellE"><span class="GramE"><span style="font-size: 11pt">struct</span></span></span><span style="font-size: 11pt">
  <span class="SpellE">Foo</span></span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  {</span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="SpellE"><span class="GramE">int</span></span> x;</span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="SpellE"><span class="GramE">int</span></span> array[100];</span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  };&nbsp; /* note semi-colon here */</span></p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">Where to define <span class="SpellE">Structs</span> </p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  Generally defined in a header file, e.g. <span class="SpellE">lexer.h</span>, 
  along with function prototypes</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="GramE">Can define them at the top of .c file</span></p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal"><b>Declaration and Usage Example:</b></p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="SpellE"><span class="GramE">struct</span></span>
  <span class="SpellE"><span style="font-size: 11pt">Foo</span></span><span style="font-size: 11pt"> 
  f;&nbsp; // automatic allocation, all fields placed on stack</span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="SpellE">f.x</span> = 54;</span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="SpellE"><span class="GramE">f.array</span></span><span class="GramE">[</span>3]=9;</span></p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal"><span style="font-size: 11pt"><i><b>typedef</b> </i>
  allows you to declare instances of a struct without using keyword "struct"</span></p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  typedef struct</span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  {</span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  int x;</span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  int array[100];</span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  } Foo;</span></p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal"><span style="font-size: 11pt">Foo is now a type that can 
  be declared without "struct" in front of it:</span></p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  Foo f;</span></p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal"><b>Passing Structs as Parameters</b></p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="SpellE">Structs</span> are passed by value, just like primitives</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="GramE"><span style="font-size: 11pt">void</span></span><span style="font-size: 11pt">
  <span class="SpellE">func</span>(<span class="SpellE">struct</span>
  <span class="SpellE">Foo</span> <span class="SpellE">foo</span>)</span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  {</span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="SpellE">foo.x</span> = 56;</span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="SpellE"><span class="GramE">foo.array</span></span><span class="GramE">[</span>3]=55;</span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  }</span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="GramE">void</span> main()</span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  {</span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="SpellE"><span class="GramE">struct</span></span>
  <span class="SpellE">Foo</span> f;&nbsp; </span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="SpellE">f.x</span> = 54;</span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="SpellE"><span class="GramE">f.array</span></span><span class="GramE">[</span>3]=9;</span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="SpellE"><span class="GramE">func</span></span><span class="GramE">(</span>f);</span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  // what are the values of <span class="SpellE">f.x</span> and
  <span class="SpellE"><span class="GramE">f.array</span></span><span class="GramE">[</span>3]
  </span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  }</span></p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">To have changes occur, send a pointer to the
  <span class="SpellE">struct</span></p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="SpellE"><span class="GramE">struct</span></span>
  <span class="SpellE"><span style="font-size: 11pt">Foo</span></span><span style="font-size: 11pt"> 
  f;&nbsp; </span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="SpellE">f.x</span> = 54;</span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="SpellE"><span class="GramE">f.array</span></span><span class="GramE">[</span>3]=9;</span></p>
  <p class="MsoNormal"><span style="font-size: 11pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="SpellE"><span class="GramE">func</span></span><span class="GramE">(</span><b>&amp;f</b>);&nbsp; 
  /* &amp; returns the address of a variable */</span></p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;<span class="GramE">and</span> have the function accept a pointer:</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="GramE">void</span> <span class="SpellE">func</span>(<span class="SpellE">struct</span>
  <span class="SpellE">Foo</span>*
  <span class="SpellE">p_foo</span>)</p>
  <p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  {</p>
  <p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="SpellE"><span class="GramE">p_foo</span></span>-&gt;x = 56;</p>
  <p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="SpellE"><span class="GramE">p_foo</span></span>-&gt;array[3]=55;</p>
  <p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  }</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  Note that -&gt; is used to get to the fields of a pointer to a
  <span class="SpellE">struct</span>.</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  -&gt; is short-hand for&nbsp;&nbsp; (*<span class="SpellE">foo</span>).x=56</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal"><b>In-Class Problem</b></p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  Define a <span class="SpellE">struct</span> <span class="SpellE">InputStream</span> 
  with an array of chars and an index.</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
  In the main</p>
  <p class="MsoNormal">&nbsp;</p>
  <p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="GramE">set</span> the array part of the <span class="SpellE">
  struct</span> to&nbsp; ABCDEFGHIJ&nbsp; using <span class="SpellE">strcpy</span>.</p>
  <p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="GramE">set</span> the index part of the <span class="SpellE">
  struct</span> to 4.</p>
  <p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="GramE">write</span> a function which accepts a pointer to the
  <span class="SpellE">struct</span> as a parameter and</p>
  <p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="GramE">returns</span> the character at the <span class="SpellE">
  <i>indexth</i></span><i> </i>location </p>
  <p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="GramE">increments</span> the index by 1.</p>
  <p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  <span class="GramE">call</span> this function from your main program.</p></div>



<div class="windowsize-size" style="display: block;">1920 X 941</div></body></html>